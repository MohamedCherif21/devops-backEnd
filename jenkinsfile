pipeline {
    agent any
  

    stages{
        
    stage ("Mvn Clean"){
        steps{
                sh "mvn clean"
            }
    }

    stage ("Mvn Package"){
        steps{
                sh "mvn clean package"
            }
        }

        stage ("Mvn compile"){
        steps{
                sh "mvn compile"
            }
        }
        

    stage("NEXUS") {
			steps {
						sh 'mvn clean deploy -DskipTests'
          }
        }


    stage('SONARQUBE') {
            steps {
                sh'mvn sonar:sonar -Dsonar.host.url=http://192.168.1.3:9000 -Dsonar.login=admin -Dsonar.password=admin'
            }
        }

        

     stage('Docker login') {
      steps {
         sh 'echo "Docker login is processing ...."'
        sh 'docker login --username $dockerhubusername --password $dockerhubpassword'

      }
    }
    stage('Docker build image') {
      steps {
         sh 'echo "Docker build image is processing ...."'
        sh 'docker build -t khaledbouchrika829/gestionski .'
      }
    }
    stage('Docker push') {
      steps {
         sh 'echo "Docker push is processing ...."'
        sh 'docker push khaledbouchrika829/gestionski'

      }
    }
    

}
}